[Unit]
Description=Django Backend Application
After=network.target postgresql.service redis.service
Wants=postgresql.service redis.service

[Service]
Type=exec
User={{ app_user }}
Group={{ app_group }}
WorkingDirectory={{ app_home }}/app
Environment=PATH={{ app_venv }}/bin
ExecStart={{ app_venv }}/bin/gunicorn backend.wsgi --bind 127.0.0.1:8000 --workers 3 --timeout 120
ExecReload=/bin/kill -s HUP $MAINPID
Restart=always
RestartSec=10

# Security settings
NoNewPrivileges=yes
PrivateTmp=yes
ProtectSystem=strict
ProtectHome=yes
ReadWritePaths={{ app_home }}

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=django

[Install]
WantedBy=multi-user.target
